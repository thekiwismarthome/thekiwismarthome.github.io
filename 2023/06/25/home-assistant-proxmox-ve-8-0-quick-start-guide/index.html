<!DOCTYPE html>
<html lang="en-NZ">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Home Assistant: Proxmox VE 8.0 Quick Start Guide &#8211; The Kiwi Smart Home</title>
<meta name="robots" content="max-image-preview:large">
<link rel="alternate" type="application/rss+xml" title="The Kiwi Smart Home &raquo; Feed" href="https://thekiwismarthome.github.io/feed/">
<link rel="alternate" type="application/rss+xml" title="The Kiwi Smart Home &raquo; Comments Feed" href="https://thekiwismarthome.github.io/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="The Kiwi Smart Home &raquo; Home Assistant: Proxmox VE 8.0 Quick Start Guide Comments Feed" href="https://thekiwismarthome.github.io/2023/06/25/home-assistant-proxmox-ve-8-0-quick-start-guide/feed/">
<script>
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/thekiwismarthome.github.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.4.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"üè≥Ô∏è‚Äç‚ößÔ∏è","üè≥Ô∏è‚Äã‚ößÔ∏è")?!1:!n(e,"üá∫üá≥","üá∫‚Äãüá≥")&&!n(e,"üè¥Û†ÅßÛ†Å¢Û†Å•Û†ÅÆÛ†ÅßÛ†Åø","üè¥‚ÄãÛ†Åß‚ÄãÛ†Å¢‚ÄãÛ†Å•‚ÄãÛ†ÅÆ‚ÄãÛ†Åß‚ÄãÛ†Åø");case"emoji":return!n(e,"ü´±üèª‚Äçü´≤üèø","ü´±üèª‚Äãü´≤üèø")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
</script>
<link rel="stylesheet" id="wp-dark-mode-frontend-css" href="https://thekiwismarthome.github.io/wp-content/plugins/wp-dark-mode/assets/css/frontend.min.css?ver=4.2.8" media="all">
<style id="wp-dark-mode-frontend-inline-css">body{--wp-dark-mode-zoom: 150%;}.wp-dark-mode-active  body { animation: wp-dark-mode-fadein 2.5s;} .wp-dark-mode-inactive body {animation: wp-dark-mode-inactive-fadein 2.5s;}body{--wp-dark-mode-scale: 0.7;}</style>
<style id="wp-emoji-styles-inline-css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="https://thekiwismarthome.github.io/wp-includes/css/dist/block-library/style.min.css?ver=6.4.2" media="all">
<style id="wp-block-library-theme-inline-css">.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}</style>
<link rel="stylesheet" id="twenty-twenty-one-custom-color-overrides-css" href="https://thekiwismarthome.github.io/wp-content/themes/twentytwentyone/assets/css/custom-color-overrides.css?ver=2.0" media="all">
<style id="classic-theme-styles-inline-css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #FFFFFF;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--dark-gray: #28303D;--wp--preset--color--gray: #39414D;--wp--preset--color--green: #D1E4DD;--wp--preset--color--blue: #D1DFE4;--wp--preset--color--purple: #D1D1E4;--wp--preset--color--red: #E4D1D1;--wp--preset--color--orange: #E4DAD1;--wp--preset--color--yellow: #EEEADD;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--gradient--purple-to-yellow: linear-gradient(160deg, #D1D1E4 0%, #EEEADD 100%);--wp--preset--gradient--yellow-to-purple: linear-gradient(160deg, #EEEADD 0%, #D1D1E4 100%);--wp--preset--gradient--green-to-yellow: linear-gradient(160deg, #D1E4DD 0%, #EEEADD 100%);--wp--preset--gradient--yellow-to-green: linear-gradient(160deg, #EEEADD 0%, #D1E4DD 100%);--wp--preset--gradient--red-to-yellow: linear-gradient(160deg, #E4D1D1 0%, #EEEADD 100%);--wp--preset--gradient--yellow-to-red: linear-gradient(160deg, #EEEADD 0%, #E4D1D1 100%);--wp--preset--gradient--purple-to-red: linear-gradient(160deg, #D1D1E4 0%, #E4D1D1 100%);--wp--preset--gradient--red-to-purple: linear-gradient(160deg, #E4D1D1 0%, #D1D1E4 100%);--wp--preset--font-size--small: 18px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 24px;--wp--preset--font-size--x-large: 42px;--wp--preset--font-size--extra-small: 16px;--wp--preset--font-size--normal: 20px;--wp--preset--font-size--extra-large: 40px;--wp--preset--font-size--huge: 96px;--wp--preset--font-size--gigantic: 144px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="twenty-twenty-one-style-css" href="https://thekiwismarthome.github.io/wp-content/themes/twentytwentyone/style.css?ver=2.0" media="all">
<link rel="stylesheet" id="twenty-twenty-one-print-style-css" href="https://thekiwismarthome.github.io/wp-content/themes/twentytwentyone/assets/css/print.css?ver=2.0" media="print">
<script nowprocket data-no-minify="1" src="https://thekiwismarthome.github.io/wp-content/plugins/wp-dark-mode/assets/js/dark-mode.min.js?ver=4.2.8" id="wp-dark-mode-js-js"></script>
<script id="wp-dark-mode-frontend-js-extra">var wpDarkMode = {"config":{"brightness":100,"contrast":90,"sepia":10},"enable_preset":"","customize_colors":"","colors":{"bg":"#000","text":"#dfdedb","link":"#e58c17"},"enable_frontend":"1","enable_backend":"1","enable_os_mode":"1","excludes":"rs-fullwidth-wrap, .mejs-container, ._channels-container","includes":"","is_excluded":"","remember_darkmode":"","default_mode":"","keyboard_shortcut":"1","url_parameter":"","images":"","videos":"","is_pro_active":"","is_ultimate_active":"","pro_version":"0","is_elementor_editor":"","is_block_editor":"","frontend_mode":"","pluginUrl":"https:\/\/thekiwismarthome.github.io\/wp-content\/plugins\/wp-dark-mode\/"};</script>
<script src="https://thekiwismarthome.github.io/wp-content/plugins/wp-dark-mode/assets/js/frontend.min.js?ver=4.2.8" id="wp-dark-mode-frontend-js"></script>
<script id="twenty-twenty-one-ie11-polyfills-js-after">
( Element.prototype.matches && Element.prototype.closest && window.NodeList && NodeList.prototype.forEach ) || document.write( '<script src="http://192.168.0.12/wp-content/themes/twentytwentyone/assets/js/polyfills.js?ver=2.0"><\/scr' + 'ipt>' );
</script>
<script src="https://thekiwismarthome.github.io/wp-content/themes/twentytwentyone/assets/js/primary-navigation.js?ver=2.0" id="twenty-twenty-one-primary-navigation-script-js" defer data-wp-strategy="defer"></script>
<link rel="https://api.w.org/" href="https://thekiwismarthome.github.io/wp-json/">
<link rel="alternate" type="application/json" href="https://thekiwismarthome.github.io/wp-json/wp/v2/posts/121">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://thekiwismarthome.github.io/xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.4.2">
<link rel="canonical" href="https://thekiwismarthome.github.io/2023/06/25/home-assistant-proxmox-ve-8-0-quick-start-guide/">
<link rel="shortlink" href="https://thekiwismarthome.github.io/?p=121">
<link rel="alternate" type="application/json+oembed" href="https://thekiwismarthome.github.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhttps%3A%2F%2Fthekiwismarthome.github.io%2F2023%2F06%2F25%2Fhome-assistant-proxmox-ve-8-0-quick-start-guide%2F">
<link rel="alternate" type="text/xml+oembed" href="https://thekiwismarthome.github.io/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fhttps%3A%2F%2Fthekiwismarthome.github.io%2F2023%2F06%2F25%2Fhome-assistant-proxmox-ve-8-0-quick-start-guide%2F#038;format=xml">
	<link rel="preconnect" href="https://fonts.googleapis.com/">
	<link rel="preconnect" href="https://fonts.gstatic.com/">
	<link href="https://fonts.googleapis.com/css2?display=swap&family=Open+Sans&family=Oswald" rel="stylesheet">
<link rel="pingback" href="https://thekiwismarthome.github.io/xmlrpc.php">	<style id="egf-frontend-styles" type="text/css">p {font-family: 'Open Sans', sans-serif;font-style: normal;font-weight: 400;} h1 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;} h2 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;} h3 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;} h4 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;} h5 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;} h6 {font-family: 'Oswald', sans-serif;font-style: normal;font-weight: 400;}</style>
		<!-- Fonts Plugin CSS - https://fontsplugin.com/ -->
	<style></style>
	<!-- Fonts Plugin CSS -->
	</head>

<body class="post-template-default single single-post postid-121 single-format-standard wp-custom-logo wp-embed-responsive is-light-theme no-js singular has-main-navigation">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">
		Skip to content	</a>

	
<header id="masthead" class="site-header has-logo has-title-and-tagline has-menu">

	
	<div class="site-logo"><a href="https://thekiwismarthome.github.io/" class="custom-logo-link" rel="home"><img width="572" height="506" src="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1.png" class="custom-logo" alt="The Kiwi Smart Home" decoding="async" fetchpriority="high" srcset="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1.png 572w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1-300x265.png 300w" sizes="(max-width: 572px) 100vw, 572px"></a></div>

<div class="site-branding">

	
						<p class="site-title"><a href="https://thekiwismarthome.github.io/">The Kiwi Smart Home</a></p>
			
			<p class="site-description">
			 Why do it tomorrow, when you can Automate it today! 		</p>
	</div>
<!-- .site-branding -->
	
	<nav id="site-navigation" class="primary-navigation" aria-label="Primary menu">
		<div class="menu-button-container">
			<button id="primary-mobile-menu" class="button" aria-controls="primary-menu-list" aria-expanded="false">
				<span class="dropdown-icon open">Menu					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.5 6H19.5V7.5H4.5V6ZM4.5 12H19.5V13.5H4.5V12ZM19.5 18H4.5V19.5H19.5V18Z" fill="currentColor"></path></svg>				</span>
				<span class="dropdown-icon close">Close					<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 10.9394L5.53033 4.46973L4.46967 5.53039L10.9393 12.0001L4.46967 18.4697L5.53033 19.5304L12 13.0607L18.4697 19.5304L19.5303 18.4697L13.0607 12.0001L19.5303 5.53039L18.4697 4.46973L12 10.9394Z" fill="currentColor"></path></svg>				</span>
			</button><!-- #primary-mobile-menu -->
		</div>
<!-- .menu-button-container -->
		<div class="primary-menu-container"><ul id="primary-menu-list" class="menu-wrapper">
<li id="menu-item-57" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-57"><a href="https://thekiwismarthome.github.io/">Home</a></li>
<li id="menu-item-58" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent menu-item-58"><a href="https://thekiwismarthome.github.io/blog/">Blog</a></li>
<li id="menu-item-59" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-59"><a href="https://thekiwismarthome.github.io/diy/">DIY</a></li>
<li id="menu-item-60" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-60">
<a href="https://thekiwismarthome.github.io/guides/">Guides</a><button class="sub-menu-toggle" aria-expanded="false" onclick="twentytwentyoneExpandSubMenu(this)"><span class="icon-plus"><svg class="svg-icon" width="18" height="18" aria-hidden="true" role="img" focusable="false" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z" fill="currentColor"></path></svg></span><span class="icon-minus"><svg class="svg-icon" width="18" height="18" aria-hidden="true" role="img" focusable="false" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 11h12v2H6z" fill="currentColor"></path></svg></span><span class="screen-reader-text">Open menu</span></button>
<ul class="sub-menu">
	<li id="menu-item-206" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-206"><a href="https://thekiwismarthome.github.io/guides/proxmox/">Proxmox</a></li>
</ul>
</li>
<li id="menu-item-62" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-62"><a href="https://thekiwismarthome.github.io/home-assistant/">Home Assistant</a></li>
<li id="menu-item-63" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-63"><a href="https://thekiwismarthome.github.io/reviews/">Reviews</a></li>
<li id="menu-item-68" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-68"><a href="https://thekiwismarthome.github.io/">Home</a></li>
</ul></div>	</nav><!-- #site-navigation -->
	
</header><!-- #masthead -->

	<div id="content" class="site-content">
		<div id="primary" class="content-area">
			<main id="main" class="site-main">

<article id="post-121" class="post-121 post type-post status-publish format-standard has-post-thumbnail hentry category-smart-home tag-guides tag-home-assistant tag-proxmox tag-proxmox-8 entry">

	<header class="entry-header alignwide">
		<h1 class="entry-title">Home Assistant: Proxmox VE 8.0 Quick Start Guide</h1>		
		
			<figure class="post-thumbnail">
				<img width="415" height="306" src="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/HA-Proxmox.png" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="" decoding="async" srcset="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/HA-Proxmox.png 415w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/HA-Proxmox-300x221.png 300w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/HA-Proxmox-150x111.png 150w" sizes="(max-width: 415px) 100vw, 415px" style="width:100%;height:73.73%;max-width:415px;">							</figure><!-- .post-thumbnail -->

					</header><!-- .entry-header -->

	<div class="entry-content">
		
<div class="wp-block-columns alignwide is-layout-flex wp-container-core-columns-layout-1 wp-block-columns-is-layout-flex">
<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:15%"><div style="font-size:0.8rem;" class="has-text-align-right wp-block-post-date"><time datetime="2023-06-25T21:19:53+12:00">25/06/2023</time></div></div>



<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:15px">
<p class="has-small-font-size">in</p>
</div>



<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:66.66%"><div class="taxonomy-category wp-block-post-terms"><a href="https://thekiwismarthome.github.io/category/smart-home/" rel="tag">Smart Home</a></div></div>
</div>



<div class="wp-block-columns alignwide are-vertically-aligned-center is-layout-flex wp-container-core-columns-layout-2 wp-block-columns-is-layout-flex">
<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:5%">
<p class="has-text-align-right"><strong>Tags:</strong></p>
</div>



<div class="wp-block-column is-vertically-aligned-center is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:90%"><div class="taxonomy-post_tag wp-block-post-terms">
<a href="https://thekiwismarthome.github.io/tag/guides/" rel="tag">Guides</a><span class="wp-block-post-terms__separator">, </span><a href="https://thekiwismarthome.github.io/tag/home-assistant/" rel="tag">Home Assistant</a><span class="wp-block-post-terms__separator">, </span><a href="https://thekiwismarthome.github.io/tag/proxmox/" rel="tag">Proxmox</a><span class="wp-block-post-terms__separator">, </span><a href="https://thekiwismarthome.github.io/tag/proxmox-8/" rel="tag">Proxmox 8</a>
</div></div>
</div>



<div class="wp-block-columns alignwide is-layout-flex wp-container-core-columns-layout-3 wp-block-columns-is-layout-flex">
<div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:33.33%">
<h3 class="simpletoc-title">Table of Contents</h3>
<ul class="simpletoc-list">
<li>
<a href="#whats-covered-in-this-guide">What&#8217;s covered in this guide?</a>

</li>
<li>
<a href="#why-proxmox-ve-for-home-assistant">Why Proxmox VE for Home Assistant?</a>

</li>
<li>
<a href="#proxmox-storage-recommendations">Proxmox Storage Recommendations</a>

</li>
<li>
<a href="#creating-proxmox-usb-boot-media">Creating Proxmox USB Boot Media</a>

</li>
<li>
<a href="#installing-proxmox-ve-80">Installing Proxmox VE 8.0</a>

</li>
<li>
<a href="#proxmox-post-install-configuration">Proxmox Post Install Configuration</a>

</li>
<li>
<a href="#intel-microcode-update-optional">Intel Microcode Update (Optional)</a>

</li>
<li>
<a href="#installing-home-assistant-os-haos-vm">Installing Home Assistant OS (HAOS) VM</a>

</li>
<li>
<a href="#setting-static-ip-address-recommended">Setting Static IP Address (Recommended)</a>

</li>
<li>
<a href="#blocked-dns-over-https-workaround">Blocked DNS over HTTPS Workaround</a>

</li>
<li>
<a href="#usb-passthrough-to-haos-optional">USB Passthrough to HAOS (Optional)</a>

</li>
<li>
<a href="#optimize-cpu-power-optional">Optimize CPU Power (Optional)</a>

</li>
<li>
<a href="#check-smart-monitoring-optional">Check SMART Monitoring (Optional)</a>

</li>
<li>
<a href="#vlan-enable-proxmox-optional">VLAN Enable Proxmox (Optional)</a>

</li>
<li>
<a href="#proxmox-lets-encrypt-ssl-cert-optional">Proxmox Let&#8217;s Encrypt SSL Cert (Optional)</a>

</li>
<li>
<a href="#summary">Summary</a>
</li>
</ul>
</div>



<div class="wp-block-column is-layout-flow wp-block-column-is-layout-flow" style="flex-basis:66.66%">
<figure class="wp-block-image size-full"><img decoding="async" width="746" height="123" src="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/image.png" alt="" class="wp-image-122" srcset="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/image.png 746w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/image-300x49.png 300w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/image-150x25.png 150w" sizes="(max-width: 746px) 100vw, 746px"></figure>



<p>Hot off the press is Proxmox VE 8.0, which GA‚Äôd on June 22, 2023. It is based on Debian Bookworm, and has a number of new features like defaulting to Linux Kernel 6.2. This post is a completely refreshed version of my popular&nbsp;<strong>Home Assistant: Proxmox VE 7.4 Quick Start Guide</strong>, but all new for Proxmox VE 8.0.&nbsp;</p>



<p>Just like my 7.4 guide, this posts covers installing Home Assistant OS (HAOS). HAOS is, IMHO, the preferred method to run Home Assistant for the large majority of people. There are other installation flavors, such as supervised or container, but those are out of scope for this post. HAOS makes Home Assistant as turn-key as possible.</p>



<p>Proxmox VE 8.0 has a new text based fall-back installation UI, which can be very helpful for working around issues with newer CPUs. I did run into GUI installation issues with Proxmox VE 7.4 on my Intel 12th Generation CPUs, so this enhancement is very welcome. We will use the new console install method in this updated post.</p>


<h2 class="wp-block-heading" id="whats-covered-in-this-guide">What&#8217;s covered in this guide?</h2>


<p>This guide walks you through a bare metal installation of Proxmox, followed by deploying a Home Assistant OS (HAOS) VM. To be more specific I cover:</p>



<ul>
<li>Why Proxmox VE for Home Assistant?</li>



<li>Proxmox Storage Recommendations</li>



<li>Creating Proxmox USB Boot Media</li>



<li>Installing Proxmox VE 8</li>



<li>Proxmox Post-Install Configuration</li>



<li>Intel Microcode Update (Optional)</li>



<li>Installing Home Assistant OS (HAOS) VM</li>



<li>Setting Static IP Address (Recommended)</li>



<li>Blocked DNS over HTTPS Workaround</li>



<li>USB Passthrough to HAOS (Optional)</li>



<li>Optimize CPU Power (Optional)</li>



<li>Check SMART Monitoring (Optional)</li>



<li>VLAN Enable Proxmox (Optional)</li>



<li>Proxmox Let‚Äôs Encrypt SSL Cert (Optional)</li>
</ul>


<h2 class="wp-block-heading" id="why-proxmox-ve-for-home-assistant">Why Proxmox VE for Home Assistant?</h2>


<p>First, why would you run Home Assistant OS as a VM on Proxmox VE 8? Well, Home Assistant is typically not very resource hungry and even old mini-PCs from several years ago would have a lot of left over computing resources that you can run other services. Running Proxmox VE, which is a free hypervisor based on KVM, has a nice management UI and is pretty easy to use. It allows you to run HAOS in a VM, and you can then run other VMs or LXC containers on the same hardware.&nbsp;</p>



<p>If you are new to Home Assistant, not super nerdy, and just want a super reliable and easy to use ‚Äúappliance‚Äù, then don‚Äôt go the Proxmox VE route. Just grab a cheap used mini/ultra-mini PC and run Home Assistant OS on it ‚Äúbare metal‚Äù and be done with it. But if you know you want HAOS as a VM, potentially do LXC containers down the road, Proxmox VE is a great (and free) option. Even though Home Assistant can do backups, being able to do a whole HAOS VM snapshot at the hypervisor level can be great for roll-back from failed upgrades or ‚Äúoh crap‚Äù mistakes.</p>



<p>The process covered in this post uses the awesome&nbsp;<a href="https://tteck.github.io/Proxmox/" target="_blank" rel="noreferrer noopener">tteck</a>&nbsp;Proxmox scripts. This makes the process super easy, grabs the latest version of HAOS, and enables GUI-driven advanced customizations. He‚Äôs updated his scripts to be compatible with Proxmox VE 8.0.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_11-23-38-scaled.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_418+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_11-23-38-1024x574.jpg" alt="" class="wp-image-11273"></a><figcaption class="wp-element-caption">Image Courtesy Proxmox.com</figcaption></figure>


<h2 class="wp-block-heading" id="proxmox-storage-recommendations">Proxmox Storage Recommendations</h2>


<p>Proxmox is designed to be used on everything from an old PC to high-end enterprise production environments. There is certainly some debate on what type of storage configuration you should use. For example, should I use ZFS? Should I use multiple physical storage devices and use ZFS mirroring? Do I need a separate boot drive? Separate log and cache drives?&nbsp;</p>



<p>Those are all valid questions to ask in an enterprise production environment. However, for a home environment my thinking is KISS (keep it simple stupid), unless you REALLY know what you are doing. Why overly complicate your configuration for a home server?&nbsp;</p>



<p>For a home environment where you have a NAS (such as Synology, QNAP, etc.) I would suggest:&nbsp;</p>



<ul>
<li>Use a single SSD/NVMe (likely M.2) drive in your Proxmox server. Make sure it‚Äôs large enough for future growth.&nbsp;</li>



<li>Use the EXT4 (default) filesystem with LVM-thin (also default)</li>



<li>Use Proxmox‚Äôs built-in backup to do nightly backups of all VMs and LXC containers to your NAS</li>



<li>Use Home Assistant‚Äôs Google Drive backup add-on to do nightly backups to the cloud</li>



<li>Configure Home Assistant 2023.6 (and later) to backup directly to your NAS</li>
</ul>



<p>For more information about Home Assistant Backups and Restores, check out my posts:</p>



<p><a href="https://www.derekseaman.com/2023/06/home-assistant-the-ultimate-backup-guide.html" target="_blank" rel="noreferrer noopener">Home Assistant: Ultimate Backup Guide</a><br><a href="https://www.derekseaman.com/2023/04/home-assistant-pt-3-restoring-your-configuration.html" target="_blank" rel="noreferrer noopener">Home Assistant: Ultimate Restore Guide</a></p>



<p>Super nerds may want to deviate from using a single drive in their Proxmox server and throw in ZFS, do ZFS mirroring, and use multiple storage devices. More power to them if that‚Äôs what they want. But for the vast majority of Home Assistant users, a single drive with robust backup is more than sufficient.</p>



<p>Do NOT try and mount NAS storage to the Proxmox host and use that for VM or LXC storage. Always build your VMs or LXCs on local Proxmox storage, or risk running into significant issues.</p>


<h2 class="wp-block-heading" id="creating-proxmox-usb-boot-media">Creating Proxmox USB Boot Media</h2>


<p>In order to install Proxmox on your server, we need to create a bootable USB drive. This is super easy and you can use your favorite tool like&nbsp;<a href="https://www.balena.io/etcher" target="_blank" rel="noreferrer noopener">Balena Etcher</a>&nbsp;(Mac/PC/Linux). The Proxmox VE installer ISO is very small, at just a bit over 1GB, so your boot media need not be large.&nbsp;</p>



<ol>
<li>Download the latest ‚Äú<a href="https://www.proxmox.com/en/downloads/item/proxmox-ve-8-0-iso-installer" target="_blank" rel="noreferrer noopener">Proxmox VE 8.0 ISO Installer</a>‚Äù (I‚Äôll be using 8.0-2)</li>



<li>Download and install&nbsp;<a href="https://www.balena.io/etcher#download-etcher" target="_blank" rel="noreferrer noopener">Balena Etcher</a>
</li>



<li>Insert your USB boot media</li>



<li>Launch&nbsp;<strong>Balena Etcher</strong>&nbsp;and select&nbsp;<strong>Flash from file</strong>&nbsp;</li>
</ol>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_09-43-59.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_447+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_09-43-59-1024x614.jpg" alt="" class="wp-image-8364"></a></figure>



<p>5. Locate the&nbsp;<strong>Proxmox VE ISO</strong>&nbsp;you downloaded<br>6. Click on&nbsp;<strong>Select target</strong>&nbsp;and select your USB boot media</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_09-48-22.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_447+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_09-48-22-1024x614.jpg" alt="" class="wp-image-8366"></a></figure>



<p>7. Click on&nbsp;<strong>Flash</strong>&nbsp;to write the image to the boot media. On a Mac you may be prompted for your password.&nbsp;<br>8. Wait a minute or so for the image to be written and verified.<br><br></p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_08-50-11.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_447+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_08-50-11-1024x614.jpg" alt="" class="wp-image-11239"></a></figure>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_08-51-19.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_447+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_08-51-19-1024x614.jpg" alt="" class="wp-image-11240"></a></figure>



<p>9. After the image is written close Balena Etcher and remove your USB &nbsp;boot media. On a Mac it is automatically safely dismounted so just pull it out.</p>


<h2 class="wp-block-heading" id="installing-proxmox-ve-80">Installing Proxmox VE 8.0</h2>


<ol>
<li>Connect a keyboard and monitor to your Proxmox server/mini-pc/NUC/etc.</li>



<li>Power off your server and insert the USB boot media</li>



<li>Power on your server and press the right key to enter your BIOS setup (varies by manufacturer)</li>



<li>Depending on what OS you were previously running, a few settings might need to be tweaked. The name of these settings and menu location varies by BIOS manufacturer. Review the following settings:</li>
</ol>



<ul>
<li>Enable&nbsp;<strong>Virtualization</strong>&nbsp;(may be called VT-x, AMD-V, SVM, etc.)</li>



<li>Enable&nbsp;<strong>Intel VT-d</strong>&nbsp;or&nbsp;<strong>AMD IOMMU</strong>&nbsp;(Future proofing for PCIe/GPU passthrough)</li>



<li>Leave&nbsp;<strong>UEFI</strong>&nbsp;boot&nbsp;<strong>enabled</strong>
</li>



<li>Enable&nbsp;<strong>auto-power on&nbsp;</strong>(Ensures host will power on after a power interruption)
<ul>
<li>This setting can be hard to find, have non-obvious names (e.g. setting&nbsp;<strong>State after G3</strong>&nbsp;to&nbsp;<strong>S0 State</strong>), or not exist at all. Varies by manufacturer.&nbsp;</li>
</ul>
</li>



<li>If you think down the road you might add a PCIe card (like a m.2 Google Coral TPU), make sure you look through the BIOS settings and DISABLE any PCIe power management (ASPM) options you find. &nbsp;</li>



<li>Change the boot order to set your USB boot media at the top</li>
</ul>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_10-11-43.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_428+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_10-11-43-1024x587.jpg" alt="" class="wp-image-8372"></a></figure>



<p>5. Save the BIOS settings and reboot. If all goes well, Proxmox VE 8.0 installer will start up.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-20-42-scaled.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_593+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-20-42-1024x814.jpg" alt="" class="wp-image-11245"></a></figure>



<p><strong>Note:</strong>&nbsp;New to Proxmox VE 8.0 is a&nbsp;<strong>console</strong>&nbsp;installation option. This will gather all the required information for the install, except without using the graphics card. Why can this be helpful? On a lot of newer generation CPUs (like Intel 12th Gen and later), the graphical install would fail to start due to GPU compatibility with the Linux graphics server. There were convoluted workarounds. For this reason, I‚Äôll walk you through the new console install method as it should be compatible with even the latest CPUs. I see no reason to use the Graphical version, as the console installer is fully featured and won‚Äôt have any GPU compatibility issues.</p>



<p>6. Arrow down to&nbsp;<strong>Install Proxmox VE (Console).<br></strong>7. Press enter on&nbsp;<strong>I agree</strong>&nbsp;on the EULA<br>8. Select the&nbsp;<strong>Target harddisk&nbsp;</strong>and press enter on&nbsp;<strong>Next.</strong></p>



<p><strong>Note:</strong>&nbsp;Don‚Äôt change the filesystem unless you know what you are doing and want to use ZFS, Btrfs or xfs. The default is EXT4 with LVM-thin, which is what we will be using.</p>



<p>9. Select your&nbsp;<strong>Country</strong>,&nbsp;<strong>Time zone</strong>&nbsp;and&nbsp;<strong>Keyboard Layout.</strong></p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-30-14.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_352+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-30-14-1024x483.jpg" alt="" class="wp-image-11246"></a></figure>



<p>10. Enter a strong<strong>&nbsp;password</strong>&nbsp;and an&nbsp;<strong>email address</strong></p>



<p>11. Select your&nbsp;<strong>Management Interface</strong>,&nbsp;<strong>Hostname</strong>,&nbsp;<strong>IP address</strong>,&nbsp;<strong>Gateway</strong>&nbsp;and&nbsp;<strong>DNS Server</strong>.</p>



<p><strong>Note 1:</strong>&nbsp; If your server is plugged into the network it should grab a DHCP address and populate the other information. I strongly recommend either using a&nbsp;<strong>static IP</strong>, or create a&nbsp;<strong>DHCP reservation</strong>&nbsp;for this server. You don‚Äôt want the IP to change on you.&nbsp;</p>



<p><strong>Note 2</strong>: Put some thought into the Proxmox hostname you want to use.&nbsp;<em><strong>YOU CAN‚ÄôT</strong></em>&nbsp;change this later or Proxmox will have serious (likely unrecoverable) problems. I‚Äôd use something generic like proxmox1.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-33-25.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_363+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-33-25-1024x498.jpg" alt="" class="wp-image-11247"></a></figure>



<p>12. Triple check everything on the&nbsp;<strong>Summary</strong>&nbsp;screen is correct then select&nbsp;<strong>Install</strong>.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-34-26.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_427+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-34-26-1024x586.jpg" alt="" class="wp-image-11248"></a></figure>


<h2 class="wp-block-heading" id="proxmox-post-install-configuration">Proxmox Post Install Configuration</h2>


<p>Before we install Home Assistant, we need to do a couple of configuration tasks. First, we need to update Proxmox with the latest packages.&nbsp;<strong>Please note you MUST run the post-configuration script</strong>&nbsp;before you do any Proxmox updates or deploy HAOS. If not, you will likely see 401 errors with the enterprise repositories since you (likely) don‚Äôt have a Proxmox paid license.</p>



<ol>
<li>Open a browser and navigate to the IP address and port 8006 (e.g. https://10.13.2.200:<strong>8006</strong>). Click through all your browser warnings and connect anyway.</li>



<li>Login with the&nbsp;<strong>root</strong>&nbsp;username the password you selected during the install process.<br><strong>Note:</strong>&nbsp;You will get a subscription warning. We will fix that in a second. Acknowledge the warning.</li>
</ol>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_10-56-50.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_408+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_10-56-50.jpg" alt="" class="wp-image-8384"></a></figure>



<p>3. In the left pane click on the hostname of your Proxmox server.<br>4. Click on&nbsp;<strong>Shell</strong>&nbsp;in the middle pane and paste in the following command to run the awesome&nbsp;<a href="https://tteck.github.io/Proxmox/" target="_blank" rel="noreferrer noopener">tteck post install script</a>:</p>



<pre class="wp-block-code"><code>bash -c "$(wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/post-pve-install.sh)"</code></pre>



<p>Copy</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-43-17.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_242+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-43-17-1024x332.jpg" alt="" class="wp-image-11253"></a></figure>



<p>5. The tteck script will ask you a series of questions. Run the script and answer&nbsp;<strong>Y</strong>&nbsp;to all of the questions. Wait a few minutes for all of the updates to install.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-44-06.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_390+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-44-06-1024x535.jpg" alt="" class="wp-image-11254"></a></figure>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-45-22.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_326+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-45-22-1024x448.jpg" alt="" class="wp-image-11255"></a></figure>



<p>6. When asked if you wish to reboot press&nbsp;<strong>enter</strong>&nbsp;on&nbsp;<strong>yes</strong>.</p>


<h2 class="wp-block-heading" id="intel-microcode-update-optional">Intel Microcode Update (Optional)</h2>


<p>Intel releases new microcode for their processors from time to time. This is different from BIOS firmware, as the Intel microcode runs inside the processor. It can fix CPU bugs or make other changes, as needed. If you are running on an Intel system you can use the following tteck script to download the latest Intel microcode and install it. A reboot will be needed for the microcode to take effect.&nbsp;</p>



<pre class="wp-block-code"><code>bash -c "$(wget -qLO - https://github.com/tteck/Proxmox/raw/main/misc/microcode.sh)"</code></pre>



<p>Copy</p>



<p>After the Proxmox host reboots you can run the following command to see if any microcode update is active. Not all CPUs need microcode updates, so you may well not see anything listed.</p>



<pre class="wp-block-code"><code>journalctl -k --grep="microcode updated early to"</code></pre>



<p>Copy</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-05-01_15-16-17.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_70+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-05-01_15-16-17-1024x96.jpg" alt="" class="wp-image-10478"></a></figure>


<h2 class="wp-block-heading" id="installing-home-assistant-os-haos-vm">Installing Home Assistant OS (HAOS) VM</h2>


<p>For the HAOS installation we will be using the awesome&nbsp;<a href="https://tteck.github.io/Proxmox/" target="_blank" rel="noreferrer noopener">tteck Proxmox Helper Scripts</a>.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-28-40.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_552+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-28-40-1024x758.jpg" alt="" class="wp-image-8394"></a><figcaption class="wp-element-caption">tteck Proxmox Helper Scripts</figcaption></figure>



<ol>
<li>Login to Proxmox and select your server in the left pane.</li>



<li>Click on&nbsp;<strong>Shell</strong>&nbsp;in the middle pane.</li>



<li>Enter the following command to start the HAOS install via the tteck Proxmox script.<br><strong>Note:</strong>&nbsp;We will be using the advanced settings to optimize the configuration. The script automatically downloads the latest HAOS stable image, creates the Proxmox VM, and will configure the hardware and networking.&nbsp;</li>
</ol>



<pre class="wp-block-code"><code>bash -c "$(wget -qLO - https://github.com/tteck/Proxmox/raw/main/vm/haos-vm.sh)"</code></pre>



<p>Copy</p>



<p>4. Press&nbsp;<strong>Enter</strong>&nbsp;to proceed.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-33-59.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_307+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-33-59-1024x421.jpg" alt="" class="wp-image-8398"></a></figure>



<p>5. Select&nbsp;<strong>Advanced</strong>&nbsp;(<em>NOT</em>&nbsp;Yes).</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-35-05-1.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_297+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-35-05-1-1024x407.jpg" alt="" class="wp-image-8401"></a></figure>



<p>6. For the&nbsp;<strong>version</strong>&nbsp;chose latest&nbsp;<strong>stable</strong>&nbsp;version<strong>.&nbsp;</strong>HAOS is regularly updated, so the screenshot may not reflect what you see.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-07-39.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_291+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-07-39-1024x399.jpg" alt="" class="wp-image-10925"></a></figure>



<p>7. Leave the default&nbsp;<strong>Virtual Machine ID</strong>.<br>8. Leave the default&nbsp;<strong>Machine Type</strong>.<br>9. Chose the&nbsp;<strong>Write Through&nbsp;</strong>Disk Cache (SUPER IMPORTANT) (arrow down then press&nbsp;<strong>space</strong>&nbsp;and then tab to&nbsp;<strong>ok</strong>).&nbsp;</p>



<p><strong>Explanation:&nbsp;</strong>If you leave this as Default (which is ‚Äúnone‚Äù within Proxmox) then the HAOS filesystem or database(s) within HAOS can be corrupted during unexpected power loss to your server.&nbsp;<strong>Write through</strong>&nbsp;causes an fsync for each write. It‚Äôs the more secure cache mode, as you can‚Äôt lose data but it is also slower.&nbsp;In fact,&nbsp;<a href="https://pve.proxmox.com/wiki/Performance_Tweaks#Disk_Cache" target="_blank" rel="noreferrer noopener">Proxmox documentation</a>&nbsp;gives you a warning for ‚ÄúNone‚Äù (which is the Default):&nbsp;<strong>Warning: like writeback, you can lose data in case of a power failure.</strong></p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-48-02.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_316+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_11-48-02-1024x434.jpg" alt="" class="wp-image-8406"></a></figure>



<p>10. Set the VM‚Äôs&nbsp;<strong>Hostname</strong>.<br>11. Change&nbsp;<strong>CPU Model</strong>&nbsp;to&nbsp;<strong>Host</strong>.</p>



<p><strong>Explanation:</strong>&nbsp;If you have a standalone Proxmox host (i.e. no multi-node clustering with Live Migration), use&nbsp;<strong>Host</strong>&nbsp;mode for the&nbsp;<strong>CPU Model</strong>. The KVM64 model hides some instructions such as MMX, AVX or AES instructions. This can have a performance impact on the VM. Per&nbsp;<a href="https://qemu-project.gitlab.io/qemu/system/qemu-cpu-models.html" target="_blank" rel="noreferrer noopener">QEMU documentation</a>: This [Host mode] passes the host CPU model features, model, stepping, exactly to the guest. This is the recommended CPU to use, provided live migration is not required.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-04_06-38-21a.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_313+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-04_06-38-21a-1024x429.jpg" alt="" class="wp-image-8632"></a></figure>



<p>12. Chose your&nbsp;<strong>Core Count</strong>&nbsp;(2 is fine).<br>13. Chose your&nbsp;<strong>RAM</strong>&nbsp;(I‚Äôd recommend 4-6GB).<br>14. Leave the&nbsp;<strong>Bridge</strong>.<br>15. Leave the&nbsp;<strong>MAC Address</strong>.<br>16. Leave the&nbsp;<strong>VLAN</strong>.<br>17. Leave the&nbsp;<strong>MTU Size</strong>.<br>18. Select&nbsp;<strong>Yes</strong>&nbsp;to start VM after creation.<br>19. Select&nbsp;<strong>Yes</strong>&nbsp;on&nbsp;<strong>Advanced Settings Complete</strong>.<br>20. If prompted to select the storage use the&nbsp;<strong>space bar</strong>&nbsp;to select the desired disk then tab to&nbsp;<strong>Ok</strong>.</p>



<p><strong>Note:</strong>&nbsp;I STRONGLY urge you to use local Proxmox storage (e.g.,&nbsp;<strong>local-lvm</strong>), not storage backed by a NAS. If there‚Äôs a network hiccup or the NAS goes offline you could easily end up with a corrupted VM.&nbsp;</p>



<p>21. Wait for the installer to complete. This will take a few minutes.&nbsp;</p>



<p>22. Once the VM is created, click on it in the left pane and then select&nbsp;<strong>console</strong>&nbsp;in the middle pane. Note the IP address and port number (8123).</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-55-30.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_458+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-23_10-55-30-1024x629.jpg" alt="" class="wp-image-11260"></a></figure>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-13-51a.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_471+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-13-51a-1024x646.jpg" alt="" class="wp-image-10932"></a></figure>



<p>23. Open a browser and open a HTTP connection (http://IP<strong>:8123</strong>).<br>24. Depending on the speed of your server, you may see a&nbsp;<strong>Preparing Home Assistant</strong>&nbsp;screen for several minutes. Wait until you see Create Account screen.&nbsp;<br>25. On the Home Assistant account screen enter your name, username and password.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-00-23.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_829+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-00-23-921x1024.jpg" alt="" class="wp-image-8410"></a></figure>



<p>26. On the HA setup screen enter your&nbsp;<strong>name</strong>,&nbsp;<strong>username</strong>&nbsp;and&nbsp;<strong>password</strong>.<br>27. On the next screen click&nbsp;<strong>detect.&nbsp;</strong>The map should move to your approximate location. Use the +/1 and drag the map around until you locate your house. Getting this right is important for automations that depend on HA detecting if you are home or not.&nbsp;<br>28. Fill in the<strong>&nbsp;country</strong>,&nbsp;<strong>language</strong>,&nbsp;<strong>timezone</strong>,&nbsp;<strong>elevation&nbsp;</strong>and<strong>&nbsp;currency</strong>.<br>30. Click&nbsp;<strong>Next</strong>.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-20-21.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-20-21-481x1024.jpg" alt="" class="wp-image-10934"></a></figure>



<p>31. Select what, if any, analytics you went to send back to the Home Assistant mother ship. Click&nbsp;<strong>Next</strong>.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-25-11.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_929+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-25-11-822x1024.jpg" alt="" class="wp-image-10935"></a></figure>



<p>32. On the next screen HA will show you all of the devices and services that it found on your network. Do NOT set any of them up here. Just click&nbsp;<strong>Finish</strong>.&nbsp;</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-27-10a.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_584+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-27-10a.jpg" alt="" class="wp-image-10937"></a></figure>


<h2 class="wp-block-heading" id="setting-static-ip-address-recommended">Setting Static IP Address (Recommended)</h2>


<p>I would strongly recommend that HAOS be configured to use a static IP address. You can do this by either a DHCP reservation in your router, or set a static IP in the Home Assistant user interface.&nbsp;</p>



<ol>
<li>In the left pane click on<strong>&nbsp;Settings -&gt; System -&gt; Network.</strong>&nbsp;Click on&nbsp;<strong>IPv4.</strong>&nbsp;</li>



<li>Change to&nbsp;<strong>Static</strong>&nbsp;and enter the details.</li>



<li>Change the address you are connecting to in your bowser and verify HA is using the new IP.</li>
</ol>


<h2 class="wp-block-heading" id="blocked-dns-over-https-workaround">Blocked DNS over HTTPS Workaround</h2>


<p>If you are blocking&nbsp;<strong>OUTBOUND</strong>&nbsp;DNS over HTTPS, then you might run into a HA bug where HA floods your firewall with TENS OF MILLIONS of DNS queries indefinitely. In order to work around this bug, we will install the SSH add-on and then modify the HA DNS configuration.&nbsp;</p>



<ol>
<li>Click on your name in the lower left panel.</li>



<li>In the right pane enable&nbsp;<strong>Advanced Mode</strong>.</li>



<li>Click on&nbsp;<strong>Settings</strong>&nbsp;in the left pane, then&nbsp;<strong>Add-ons</strong>.</li>



<li>Click on&nbsp;<strong>Add-on store</strong>&nbsp;in the lower right</li>



<li>Search for ‚Äú<strong>ssh</strong>‚Äù and select the&nbsp;<strong>Advanced SSH &amp; Web Terminal</strong>. Click on it.</li>



<li>Click&nbsp;<strong>Install.</strong>
</li>



<li>After it installs, click on&nbsp;<strong>Show in sidebar</strong>.</li>



<li>&nbsp;Click on&nbsp;<strong>Configuration</strong>&nbsp;at the top of the screen.&nbsp;</li>



<li>Enter the username and password that you configured on the initial HA setup screen. Click on&nbsp;<strong>Save.</strong>
</li>
</ol>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-37-30.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_267+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-06-19_09-37-30-1024x366.jpg" alt="" class="wp-image-10938"></a></figure>



<p>10. Click on the&nbsp;<strong>Info</strong>&nbsp;tab at the top left of the screen.&nbsp;<br>11. Click on&nbsp;<strong>Start.<br></strong>12. In the left pane in HA click on&nbsp;<strong>Terminal</strong>.<br>13. Run the following two commands:</p>



<pre class="wp-block-code"><code>ha dns options --fallback=false
ha dns restart</code></pre>



<p>Copy</p>



<p>14. Re-enable the DoH block rule on your firewall.<br>15. Monitor your network to verify your firewall is not being flooded with DNS requests.</p>


<h2 class="wp-block-heading" id="usb-passthrough-to-haos-optional">USB Passthrough to HAOS (Optional)</h2>


<p>If you have any USB dongles for radios such as z-wave, Zigbee, Thread, etc, we need to pass it through to the HAOS VM. This is optional, and not needed if you have no USB devices to passthrough. I am using the&nbsp;<a href="https://www.seeedstudio.com/Home-Assistant-SkyConnect-p-5479.html" target="_blank" rel="noreferrer noopener">Home Assistant SkyConnect</a>&nbsp;Zigbee/Thread/Matter USB dongle.</p>



<ol>
<li>Connect your USB dongle to your server.</li>



<li>In the left pane click on your HAOS VM.</li>



<li>In the middle pane click&nbsp;<strong>Hardware</strong>.</li>



<li>Click on&nbsp;<strong>Add</strong>&nbsp;then&nbsp;<strong>USB Device</strong>.</li>



<li>Select Use<strong>&nbsp;USB Vendor/Device ID</strong>.</li>



<li>Chose the USB device to passthrough.</li>
</ol>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-34-25.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_464+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-34-25.jpg" alt="" class="wp-image-8411"></a></figure>



<p>7. In the upper right hand corner of the VM pane click on the down arrow next to&nbsp;<strong>Shutdown</strong>&nbsp;and select&nbsp;<strong>Reboot</strong>.<br>8. Home Assistant will auto-discover the dongle after the reboot.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-37-23.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_220+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_13-37-23.jpg" alt="" class="wp-image-8412"></a></figure>


<h2 class="wp-block-heading" id="optimize-cpu-power-optional">Optimize CPU Power (Optional)</h2>


<p>Depending on your server hardware and how concerned you are about power consumption, you might want to tweak how Proxmox handles CPU scaling. I have a 12th Generation Alder Lake CPU (i5-1235U), which idles at 8w-10w according to a smart power plug.&nbsp;</p>



<p>Processors have different power governors, so run this command to see which ones are available to you:</p>



<pre class="wp-block-code"><code>cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors</code></pre>



<p>Copy</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-02_14-55-10.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_134+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-02_14-55-10-1024x184.jpg" alt="" class="wp-image-8439"></a></figure>



<p>My processor lists&nbsp;<strong>performance</strong>&nbsp;and&nbsp;<strong>powersave</strong>&nbsp;options. Run the following commands to set the mode to&nbsp;<strong>powersave</strong>&nbsp;permanently. Change the&nbsp;<strong>GOVERNOR</strong>&nbsp;setting as needed for your processor and desired power mode.&nbsp;</p>



<pre class="wp-block-code"><code>apt install cpufrequtils

cat &lt;&lt; 'EOF' &gt; /etc/default/cpufrequtils
GOVERNOR="powersave"
EOF</code></pre>



<p>Copy</p>


<h2 class="wp-block-heading" id="check-smart-monitoring-optional">Check SMART Monitoring (Optional)</h2>


<p>Proxmox should enable SMART disk monitoring by default. But it‚Äôs a good idea to check the SMART health stats to make sure your media isn‚Äôt having any issues. On rare occasions a motherboard may not support SMART, so it‚Äôs always best to check that it is working.</p>



<p>Check SMART Health:</p>



<ol>
<li>In the left pane change to&nbsp;<strong>Server View</strong>. Click on your Proxmox host.</li>



<li>In the middle pane click on&nbsp;<strong>Disks</strong>.</li>



<li>&nbsp;In the right pane you should see your disk(s) and&nbsp;<strong>SMART&nbsp;</strong>status. You can click on the main disk device then click&nbsp;<strong>Show SMART values&nbsp;</strong>to further inspect the health.</li>
</ol>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-05-02_06-26-53.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_161+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-05-02_06-26-53-1024x221.jpg" alt="" class="wp-image-10528"></a></figure>


<h2 class="wp-block-heading" id="vlan-enable-proxmox-optional">VLAN Enable Proxmox (Optional)</h2>


<p>Out of the box Proxmox is not VLAN aware. Even if you don‚Äôt need VLANs right now, you can still enable a check box to make Proxmox VLAN aware. Then down the road when you want to setup VLANs, it‚Äôs one less thing to remember to do and VLANs will just work.</p>



<p>To enable VLANs:</p>



<ol>
<li>In the left pane change to&nbsp;<strong>Server View</strong>. Click on your Proxmox host.</li>



<li>In the middle pane click on&nbsp;<strong>Network</strong>&nbsp;(under system).</li>



<li>Click on&nbsp;<strong>Linux Bridge</strong>&nbsp;(<strong>vmbr0).</strong>&nbsp;Click on<strong>&nbsp;Edit.</strong>
</li>



<li>Tick the box next to<strong>&nbsp;VLAN aware&nbsp;</strong>and click&nbsp;<strong>OK.</strong>
</li>
</ol>



<p><strong>Tip:&nbsp;</strong>If you install other services on your Proxmox server like HomeBridge, Scrypted, etc. then turning on&nbsp;<strong>VLAN enable</strong>&nbsp;might cause an issue with IGMP snooping on your physical switches. This is not a guaranteed problem. I had to disable IGMP snooping on all of my physical switches or any Homekit/multi-cast services would not function. Turning off IGMP snooping on a small home network isn‚Äôt really a big deal. Another person I know had to do a switch firmware upgrade. Or you can try using AVAHI as the mDNS provider for any services like HomeBridge and Scrypted.</p>



<figure class="wp-block-image"><a href="https://www.derekseaman.com/wp-content/uploads/2023-04-06_18-17-43.jpg"><img decoding="async" src="https://sp-ao.shortpixel.ai/client/q_lossy+w_746+h_326+to_auto+ret_img/https://www.derekseaman.com/wp-content/uploads/2023-04-06_18-17-43-1024x448.jpg" alt="" class="wp-image-8801"></a></figure>


<h2 class="wp-block-heading" id="proxmox-lets-encrypt-ssl-cert-optional">Proxmox Let&#8217;s Encrypt SSL Cert (Optional)</h2>


<p>If you want to secure Proxmox with a trusted SSL certificate and even add Proxmox as an iFrame to Home Assistant follow my post&nbsp;<a href="https://www.derekseaman.com/2023/04/proxmox-lets-encrypt-ssl-the-easy-button.html" target="_blank" rel="noreferrer noopener">Proxmox Let‚Äôs Encrypt SSL: The Easy Button</a></p>


<h2 class="wp-block-heading" id="summary">Summary</h2>


<p>You now have Home Assistant OS (HAOS) running on Proxmox VE 8.0! The whole process is pretty easy and with the&nbsp;<a href="https://tteck.github.io/Proxmox/" target="_blank" rel="noreferrer noopener"><strong>tteck</strong></a>&nbsp;scripts, makes creating the HAOS VM a snap. Tteck has a bunch of other Proxmox scripts to setup a variety of VMs and LXC containers. Visually Proxmox VE 8.0 is pretty much the same as 7.4. However, the new console setup process bypasses any possible graphical install issues with newer generation GPUs. This is a welcomed change. Plus now that the Linux Kernel 6.2 is the default, makes the installation that much quicker and easier.&nbsp;</p>
</div>
</div>
	</div>
<!-- .entry-content -->

	<footer class="entry-footer default-max-width">
		<div class="posted-by">
<span class="posted-on">Published <time class="entry-date published updated" datetime="2023-06-25T21:19:53+12:00">25/06/2023</time></span><span class="byline">By <a href="https://thekiwismarthome.github.io/author/haadmin/" rel="author">haadmin</a></span>
</div>
<div class="post-taxonomies">
<span class="cat-links">Categorised as <a href="https://thekiwismarthome.github.io/category/smart-home/" rel="category tag">Smart Home</a> </span><span class="tags-links">Tagged <a href="https://thekiwismarthome.github.io/tag/guides/" rel="tag">Guides</a>, <a href="https://thekiwismarthome.github.io/tag/home-assistant/" rel="tag">Home Assistant</a>, <a href="https://thekiwismarthome.github.io/tag/proxmox/" rel="tag">Proxmox</a>, <a href="https://thekiwismarthome.github.io/tag/proxmox-8/" rel="tag">Proxmox 8</a></span>
</div>	</footer><!-- .entry-footer -->

				
</article><!-- #post-121 -->

<div id="comments" class="comments-area default-max-width show-avatars">

	
		<div id="respond" class="comment-respond">
		<h2 id="reply-title" class="comment-reply-title">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://thekiwismarthome.github.io/2023/06/25/home-assistant-proxmox-ve-8-0-quick-start-guide/#respond" style="display:none;">Cancel reply</a></small>
</h2>
<form action="http://192.168.0.12/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate>
<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> <span class="required-field-message">Required fields are marked <span class="required">*</span></span></p>
<p class="comment-form-comment"><label for="comment">Comment <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="5" maxlength="65525" required></textarea></p>
<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" autocomplete="name" required></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" autocomplete="url"></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes"> <label for="wp-comment-cookies-consent">Save my name, email, and website in this browser for the next time I comment.</label></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="121" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p>
</form>	</div>
<!-- #respond -->
	
</div>
<!-- #comments -->

	<nav class="navigation post-navigation" aria-label="Posts">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-next"><a href="https://thekiwismarthome.github.io/2023/06/25/install-wordpress/" rel="next"><p class="meta-nav">Next post<svg class="svg-icon" width="24" height="24" aria-hidden="true" role="img" focusable="false" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m4 13v-2h12l-4-4 1-2 7 7-7 7-1-2 4-4z" fill="currentColor"></path></svg></p>
<p class="post-title">Install WordPress</p></a></div></div>
	</nav>			</main><!-- #main -->
		</div>
<!-- #primary -->
	</div>
<!-- #content -->

	
	<aside class="widget-area">
		<section id="block-2" class="widget widget_block widget_search"><form role="search" method="get" action="http://192.168.0.12/" class="wp-block-search__button-outside wp-block-search__text-button wp-block-search">
<label class="wp-block-search__label" for="wp-block-search__input-1">Search</label><div class="wp-block-search__inside-wrapper ">
<input class="wp-block-search__input" id="wp-block-search__input-1" placeholder="" value="" type="search" name="s" required><button aria-label="Search" class="wp-block-search__button wp-element-button" type="submit">Search</button>
</div>
</form></section><section id="block-3" class="widget widget_block"><div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-group__inner-container">
<h2 class="wp-block-heading">Recent Posts</h2>
<ul class="wp-block-latest-posts__list wp-block-latest-posts">
<li><a class="wp-block-latest-posts__post-title" href="https://thekiwismarthome.github.io/2024/01/22/rpi-voice-assistant-remote-satelite/">RPi Voice Assistant Remote Satelite</a></li>
<li><a class="wp-block-latest-posts__post-title" href="https://thekiwismarthome.github.io/2023/08/02/home-assistant-hard-drive-growing-every-day/">Home Assistant Hard Drive Growing Every Day</a></li>
<li><a class="wp-block-latest-posts__post-title" href="https://thekiwismarthome.github.io/2023/06/29/server-intel-nuc/">Server &#8211; Intel NUC</a></li>
<li><a class="wp-block-latest-posts__post-title" href="https://thekiwismarthome.github.io/2023/06/25/install-wordpress/">Install WordPress</a></li>
<li><a class="wp-block-latest-posts__post-title" href="https://thekiwismarthome.github.io/2023/06/25/home-assistant-proxmox-ve-8-0-quick-start-guide/">Home Assistant: Proxmox VE 8.0 Quick Start Guide</a></li>
</ul>
</div></div></section><section id="block-4" class="widget widget_block"><div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-group__inner-container">
<h2 class="wp-block-heading">Recent Comments</h2>
<div class="no-comments wp-block-latest-comments">No comments to show.</div>
</div></div></section><section id="block-5" class="widget widget_block"><div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-group__inner-container">
<h2 class="wp-block-heading">Archives</h2>
<ul class="wp-block-archives-list wp-block-archives">	<li><a href="https://thekiwismarthome.github.io/2024/01/">January 2024</a></li>
	<li><a href="https://thekiwismarthome.github.io/2023/08/">August 2023</a></li>
	<li><a href="https://thekiwismarthome.github.io/2023/06/">June 2023</a></li>
</ul>
</div></div></section><section id="block-6" class="widget widget_block"><div class="wp-block-group is-layout-flow wp-block-group-is-layout-flow"><div class="wp-block-group__inner-container">
<h2 class="wp-block-heading">Categories</h2>
<ul class="wp-block-categories-list wp-block-categories">	<li class="cat-item cat-item-15">
<a href="https://thekiwismarthome.github.io/category/raspberry-pi/">Raspberry Pi</a>
</li>
	<li class="cat-item cat-item-21">
<a href="https://thekiwismarthome.github.io/category/remote-satellite/">Remote Satellite</a>
</li>
	<li class="cat-item cat-item-16">
<a href="https://thekiwismarthome.github.io/category/rpi/">RPi</a>
</li>
	<li class="cat-item cat-item-9">
<a href="https://thekiwismarthome.github.io/category/smart-home/">Smart Home</a>
</li>
	<li class="cat-item cat-item-1">
<a href="https://thekiwismarthome.github.io/category/uncategorised/">Uncategorised</a>
</li>
	<li class="cat-item cat-item-14">
<a href="https://thekiwismarthome.github.io/category/smart-home/voice-assistant/">Voice Assistant</a>
</li>
</ul>
</div></div></section>	</aside><!-- .widget-area -->

	
	<footer id="colophon" class="site-footer">

				<div class="site-info">
			<div class="site-name">
									<div class="site-logo"><a href="https://thekiwismarthome.github.io/" class="custom-logo-link" rel="home"><img width="572" height="506" src="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1.png" class="custom-logo" alt="The Kiwi Smart Home" decoding="async" srcset="https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1.png 572w, https://thekiwismarthome.github.io/wp-content/uploads/2023/06/Home-Automation-Logo1-300x265.png 300w" sizes="(max-width: 572px) 100vw, 572px"></a></div>
							</div>
<!-- .site-name -->

			
			<div class="powered-by">
				Proudly powered by <a href="https://wordpress.org/">WordPress</a>.			</div>
<!-- .powered-by -->

		</div>
<!-- .site-info -->
	</footer><!-- #colophon -->

</div>
<!-- #page -->

			<script>;(function () { window.wpDarkMode = {"config":{"brightness":100,"contrast":90,"sepia":10},"enable_preset":false,"customize_colors":false,"colors":{"bg":"#000","text":"#dfdedb","link":"#e58c17"},"enable_frontend":true,"enable_backend":true,"enable_os_mode":true,"excludes":"rs-fullwidth-wrap, .mejs-container, ._channels-container","includes":"","is_excluded":false,"remember_darkmode":false,"default_mode":false,"keyboard_shortcut":true,"url_parameter":false,"images":"","videos":"","is_pro_active":false,"is_ultimate_active":false,"pro_version":0,"is_elementor_editor":false,"is_block_editor":false,"frontend_mode":false,"pluginUrl":"https:\/\/thekiwismarthome.github.io\/wp-content\/plugins\/wp-dark-mode\/"}; 
					window.checkOsDarkMode = () => { if (!window.wpDarkMode.enable_os_mode || localStorage.getItem('wp_dark_mode_active')) return false; 
						const darkMediaQuery = window.matchMedia('(prefers-color-scheme: dark)'); 
						if (darkMediaQuery.matches) return true; 
						try { darkMediaQuery.addEventListener('change', function(e) { return e.matches == true; }); } catch (e1) { 
							try { darkMediaQuery.addListener(function(e) { return e.matches == true; }); } catch (e2) { console.error(e2); return false; } } return false; }; 
						const is_saved = localStorage.getItem('wp_dark_mode_active'); const shouldDarkMode = is_saved == '1' || (!is_saved && window.checkOsDarkMode()); 
						if (shouldDarkMode) { const isCustomColor = parseInt("");
							const isPerformanceMode = Boolean(); if (!isCustomColor && !isPerformanceMode) { if (document.getElementById('pre_css')) { document.getElementById('pre_css').remove(); } 
							if ('' === ``) { if ( typeof DarkMode === 'object') DarkMode.enable(); } } } })();</script>
			<div class="codeCopyTooltip" style="display: inline-block; background: #333; color: white; padding: 0 8px; font-size: 14px; border-radius: 2px; border: 1px solid #111; position:absolute; display: none;">Click to Copy</div>
<script type="text/javascript">function getElementPosition(el) {
		var rect = el.getBoundingClientRect(),
		scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
		scrollTop = window.pageYOffset || document.documentElement.scrollTop;
		return { top: rect.top + scrollTop - 30, left: rect.left + scrollLeft }
	}

	function applyCodeCopy(element) {
		element.addEventListener("click", function() {
			event.stopPropagation();
			const el = document.createElement('textarea');
			el.value = element.textContent;
			document.body.appendChild(el);
			el.select();
			document.execCommand('copy');
			document.body.removeChild(el);
			codeCopyTooltip.innerHTML = 'Copied!'
		});
		element.addEventListener("mouseover", function() {
			event.stopPropagation();
			var position = getElementPosition(element);
			codeCopyTooltip.innerHTML = 'Click to Copy';
			codeCopyTooltip.style.display = 'inline-block';
			codeCopyTooltip.style.top = position.top + 'px';
			codeCopyTooltip.style.left = position.left + 'px';
		});
		element.addEventListener("mouseout", function() {
			event.stopPropagation();
			var position = getElementPosition(element);
			codeCopyTooltip.style.display = 'none';
			codeCopyTooltip.style.top ='9999px';
		});
	}

	var codeCopyTooltip = document.querySelector('.codeCopyTooltip');

	document.querySelectorAll("code").forEach(function(element) {
		applyCodeCopy(element);
	});</script>

<div class="wp-dark-mode-switcher wp-dark-mode-ignore style-1  floating right_bottom">

	
	<label for="wp-dark-mode-switch" class="wp-dark-mode-ignore wp-dark-mode-none">
		<div class="modes wp-dark-mode-ignore">
			<img class="light" src="https://thekiwismarthome.github.io/wp-content/plugins/wp-dark-mode/assets/images/btn-1/light.png" alt="Light">
			<img class="dark" src="https://thekiwismarthome.github.io/wp-content/plugins/wp-dark-mode/assets/images/btn-1/dark.png" alt="Dark">
		</div>
	</label>
</div>
<script>document.body.classList.remove("no-js");</script>	<script>if ( -1 !== navigator.userAgent.indexOf( 'MSIE' ) || -1 !== navigator.appVersion.indexOf( 'Trident/' ) ) {
		document.body.classList.add( 'is-IE' );
	}</script>
	<style id="core-block-supports-inline-css">.wp-container-core-columns-layout-1.wp-container-core-columns-layout-1{flex-wrap:nowrap;}.wp-container-core-columns-layout-2.wp-container-core-columns-layout-2{flex-wrap:nowrap;}.wp-container-core-columns-layout-3.wp-container-core-columns-layout-3{flex-wrap:nowrap;}</style>
<script src="https://thekiwismarthome.github.io/wp-includes/js/comment-reply.min.js?ver=6.4.2" id="comment-reply-js" async data-wp-strategy="async"></script>
<script src="https://thekiwismarthome.github.io/wp-content/themes/twentytwentyone/assets/js/responsive-embeds.js?ver=2.0" id="twenty-twenty-one-responsive-embeds-script-js"></script>

</body>
</html>